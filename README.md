# Dify Chat CLI

ä¸“ä¸ºå¼€å‘è€…è®¾è®¡çš„DifyçŸ¥è¯†åº“æ–‡æ¡£ç”ŸæˆCLIå·¥å…·ã€‚é€šè¿‡CLIä¸AIå¯¹è¯ï¼Œè®©AIè¯†åˆ«æŒ‡å®šç›®å½•ä¸‹çš„ä»£ç å’Œæ–‡æ¡£å†…å®¹ï¼Œç”Ÿæˆæ ‡å‡†åŒ–çš„markdownæ–‡æ¡£ï¼Œç»ç”¨æˆ·æ ¸å¯¹åä¸Šä¼ åˆ°DifyçŸ¥è¯†åº“ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- **ğŸ¯ å¯¹è¯å¼æ–‡æ¡£ç”Ÿæˆ**: é€šè¿‡CLIå¯¹è¯è®©AIè¯†åˆ«ä»£ç å¹¶ç”Ÿæˆæ–‡æ¡£
- **ğŸ“ æ™ºèƒ½æ–‡ä»¶æ‰«æ**: è‡ªåŠ¨è¯†åˆ«ä»£ç æ–‡ä»¶ï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€
- **ğŸ“ äº¤äº’å¼é¢„è§ˆ**: å®æ—¶é¢„è§ˆAIç”Ÿæˆçš„markdownæ–‡æ¡£ï¼Œæ”¯æŒä¿®æ”¹
- **ğŸš€ ä¸€é”®ä¸Šä¼ **: ç¡®è®¤æ— è¯¯åä¸€é”®ä¸Šä¼ åˆ°DifyçŸ¥è¯†åº“
- **âš¡ ç°ä»£åŒ–**: åŸºäºReact + Inkæ„å»ºçš„ç°ä»£åŒ–CLIä½“éªŒ

## ğŸ“¦ å®‰è£…

### å…¨å±€å®‰è£…
```bash
pnpm add -g dify-chat-cli
```

## ğŸ”§ é…ç½®

### ç¯å¢ƒå˜é‡
é…ç½®æ–‡ä»¶è·¯å¾„: `~/.dify-chat/.env`

```bash
# å¿…éœ€
DIFY_API_KEY=your_dify_api_key_here

# å¯é€‰
DIFY_BASE_URL=https://api.dify.ai
NODE_ENV=production
```

### è·å–APIå¯†é’¥
1. ç™»å½• [Difyå¹³å°](https://dify.ai)
2. è¿›å…¥åº”ç”¨è®¾ç½®
3. å¤åˆ¶APIå¯†é’¥å¹¶é…ç½®åˆ°ç¯å¢ƒå˜é‡

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### ğŸš€ åŸºç¡€ä½¿ç”¨
```bash
# å¯åŠ¨äº¤äº’å¼èŠå¤©
chat

# æŸ¥çœ‹å¸®åŠ©
chat --help
```

### ğŸ“‹ äº¤äº’å¼å‘½ä»¤ï¼ˆæ¨èï¼‰
å¯åŠ¨CLIåï¼Œåœ¨èŠå¤©ç•Œé¢ä¸­ä½¿ç”¨ï¼š

| å‘½ä»¤ | åŠŸèƒ½ |
|------|------|
| `@kb` | é€‰æ‹©DifyçŸ¥è¯†åº“ |
| `@upload` | æ¿€æ´»ä¸Šä¼ æ¨¡å¼ |
| `@help` | æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å‘½ä»¤ |

### ğŸ“ æ™ºèƒ½æ–‡ä»¶ä¸Šä¼ 
æ”¯æŒå¤šç§æ–‡ä»¶ä¸Šä¼ æ–¹å¼ï¼š

#### 1. ç›´æ¥è·¯å¾„è¾“å…¥
```
> ./src/main.js
```

#### 2. ç›®å½•æ‰¹é‡ä¸Šä¼ 
```
> ./src/components
```

#### 3. æ‹–æ‹½æ–‡ä»¶è·¯å¾„
ç›´æ¥æ‹–æ‹½æ–‡ä»¶åˆ°ç»ˆç«¯ï¼Œè·¯å¾„ä¼šè‡ªåŠ¨è¯†åˆ«

#### 4. å¤åˆ¶ç²˜è´´
```
> /Users/yourname/Documents/project/README.md
```

#### 5. å¤šæ–‡ä»¶ä¸Šä¼ 
```
> ./src/main.js ./package.json ./README.md
```

### ğŸ¯ ä½¿ç”¨æµç¨‹
1. **å¯åŠ¨CLI**: `chat`
2. **é€‰æ‹©çŸ¥è¯†åº“**: è¾“å…¥ `@kb` é€‰æ‹©ç›®æ ‡çŸ¥è¯†åº“
3. **ä¸Šä¼ æ–‡æ¡£**: ç›´æ¥è¾“å…¥æ–‡ä»¶è·¯å¾„æˆ–ç›®å½•è·¯å¾„
4. **ç¡®è®¤ä¸Šä¼ **: ç³»ç»Ÿä¼šæ˜¾ç¤ºä¸Šä¼ è¿›åº¦å’Œç»“æœ

### ğŸ“Š æ”¯æŒçš„æ–‡ä»¶ç±»å‹
- **ä»£ç æ–‡ä»¶**: `.js`, `.ts`, `.tsx`, `.jsx`, `.py`, `.java`, `.go`, `.rs`, `.php`, `.rb`
- **é…ç½®æ–‡ä»¶**: `.json`, `.yaml`, `.yml`, `.toml`, `.env`
- **æ–‡æ¡£æ–‡ä»¶**: `.md`, `.txt`, `.html`, `.css`
- **å…¶ä»–**: `.sql`, `.sh`, `.dockerfile`, `.log`

## ğŸ› ï¸ å¼€å‘

### ç¯å¢ƒè¦æ±‚
- Node.js >= 18.0.0
- pnpm >= 8.0.0

### é¡¹ç›®ç»“æ„
```
dify-chat-cli/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx              # åº”ç”¨ç¨‹åºä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ index.tsx            # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ components/          # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Chat/            # ä¸»èŠå¤©å®¹å™¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ChatInput/       # èŠå¤©è¾“å…¥ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ChatMessages/    # æ¶ˆæ¯æ˜¾ç¤ºç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ CommandSuggestions/ # å‘½ä»¤å»ºè®®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ FileUploader/    # æ–‡ä»¶ä¸Šä¼ ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ KnowledgeBaseSelector/ # çŸ¥è¯†åº“é€‰æ‹©å™¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ PathSuggestions/ # è·¯å¾„å»ºè®®ç»„ä»¶
â”‚   â”‚   â””â”€â”€ StatusBar/       # çŠ¶æ€æ ç»„ä»¶
â”‚   â”œâ”€â”€ common/              # å…±äº«ä»£ç 
â”‚   â”‚   â”œâ”€â”€ hooks/           # è‡ªå®šä¹‰é’©å­
â”‚   â”‚   â”‚   â”œâ”€â”€ useChat.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useCommandSuggestions.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useFileUpload.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useKnowledgeBase.ts
â”‚   â”‚   â”‚   â””â”€â”€ usePathSuggestions.ts
â”‚   â”‚   â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”‚       â”œâ”€â”€ contextManager.ts  # ä¸Šä¸‹æ–‡ç®¡ç†å·¥å…·
â”‚   â”‚       â”œâ”€â”€ yoga-compat.ts     # Yogaå¸ƒå±€å…¼å®¹å±‚
â”‚   â”‚       â””â”€â”€ index.ts           # å·¥å…·å‡½æ•°å¯¼å‡º
â”‚   â”œâ”€â”€ services/            # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ dify.ts          # Dify APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ openai.ts        # OpenAI APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ fileScanner.ts   # æ–‡ä»¶æ‰«ææœåŠ¡
â”‚   â”‚   â””â”€â”€ config.ts        # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ types/               # ç±»å‹å®šä¹‰
â”‚       â”œâ”€â”€ chat.ts          # èŠå¤©ç›¸å…³ç±»å‹
â”‚       â”œâ”€â”€ cli.ts           # CLIç‰¹å®šç±»å‹
â”‚       â”œâ”€â”€ dify.ts          # Dify APIç±»å‹
â”‚       â”œâ”€â”€ file.ts          # æ–‡ä»¶ç›¸å…³ç±»å‹
â”‚       â””â”€â”€ index.ts         # ç±»å‹å¯¼å‡ºç´¢å¼•
â””â”€â”€ [é…ç½®æ–‡ä»¶]
```

### ä½¿ç”¨ç¤ºä¾‹
```bash
# å¯åŠ¨äº¤äº’å¼æ–‡æ¡£ç”Ÿæˆ
chat

# å¿«é€Ÿæ–‡æ¡£ç”Ÿæˆ
chat generate --path ./src/components

# ä¸Šä¼ æ–‡æ¡£åˆ°çŸ¥è¯†åº“
chat upload --kb-id abc123 --file generated-doc.md
```

### å¼€å‘å‘½ä»¤
```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼ï¼ˆå¸¦çƒ­é‡è½½ï¼‰
pnpm dev

# ç”Ÿäº§æ„å»º
pnpm build

# è¿è¡Œæ„å»ºåçš„CLI
pnpm start

# ä»£ç æ£€æŸ¥
pnpm lint

# ç±»å‹æ£€æŸ¥
pnpm type-check
```

## ğŸ“‹ æŠ€æœ¯æ ˆ

- **Runtime**: Node.js >= 18
- **UI Framework**: React + Ink v4
- **Language**: TypeScript
- **Build Tool**: esbuild
- **HTTP Client**: Axios
- **é…ç½®ç®¡ç†**: dotenv


## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶